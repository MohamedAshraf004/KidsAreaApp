@model Reservation

@{
    Layout = null;
}

<!DOCTYPE html>
<html style="height:30%">
<head>
    <title>Print</title>
</head>
<body style="height:30%;direction: rtl;">

    <div id="dvContents" style="direction: rtl;">
        <h2 style="">
            <a style="text-decoration:none" asp-action="Index">كوكوجو كيدز ايريا</a>
        </h2>
        @if (Model.Receipt.BarCode != null)
        {
            <img src="@String.Format("data:image/png;base64,{0}",
                                Convert.ToBase64String(Model.Receipt.BarCode))" />


        }
        else
        {
            <p> @Model.Receipt.SerialKey</p>
        }
        <div>
            <p>وقت البدء : @Model.StartReservationTme</p>

            @if (Model.EndReservationTme != new DateTime(2021, 1, 1, 12, 0, 0) && Model.EndReservationTme != new DateTime())
            {
                <p>وقت الانتهاء : @Model.EndReservationTme</p>
                <p>اجمالى الوقت : @((int)Model.EndReservationTme.Subtract(@Model.StartReservationTme).TotalMinutes) min</p>

                @if (Model.TotatCost != 0)
                {
                    <p> اجمالى التكلفه: @Model.TotatCost</p>
                    <p>  الخصم: @Model.Discount</p>
                    <p>  الاجمالى بعد الخصم: @Model.CostAfterDiscount</p>
                }
            }
        </div>

    </div>

    <input type="button" id="btnPrint" value="Print" />

    <script src="~/lib/jquery/dist/jquery.min.js"></script>
    <script type="text/javascript">
        $(function () {
            $("#btnPrint").click(function () {
                var contents = $("#dvContents").html();
                var frame1 = $('<iframe />');
                frame1[0].name = "frame1";
                frame1.css({ "position": "absolute", "top": "-1000000px" });
                $("body").append(frame1);
                var frameDoc = frame1[0].contentWindow ? frame1[0].contentWindow : frame1[0].contentDocument.document ? frame1[0].contentDocument.document : frame1[0].contentDocument;
                frameDoc.document.open();
                //Create a new HTML document.
                frameDoc.document.write('<html><head><title>DIV Contents</title>');
                frameDoc.document.write('</head><body style="direction: rtl;">');
                //Append the external CSS file.
                //frameDoc.document.write('<link href="style.css" rel="stylesheet" type="text/css" />');
                //Append the DIV contents.
                frameDoc.document.write(contents);
                frameDoc.document.write('</body></html>');
                frameDoc.document.close();
                setTimeout(function () {
                    window.frames["frame1"].focus();
                    window.frames["frame1"].print();
                    frame1.remove();
                }, 500);
            });
        });
    </script>
</body>
</html>
